# Тестовое задание ([C#-разработчик](https://devkg.com/ru/jobs/c-razrabotchik-strong-junior-middle-gu-kyzmat-17376?utm_source=telegram&utm_medium=channel&utm_campaign=transition))

Сделать API с возможностью авторизации пользователя и совершения платежа только после успешной авторизации.
Должны быть 3 endpoint'а: login (вводим логин и пароль, при успехе выдает токен), logout (делает токен недействительным)
и payment (при добавлении пользователя в БД ставим баланс 8 USD, сама операция позволяет снимать с баланса пользователя 1.1 USD при каждом вызове,
все совершенные платежи хранятся в БД). Сделанный проект надо выгрузить в репозиторий на Github.

Требования к функционалу (авторизация):

- если логин/пароль неправильные - выводим ошибку
- одновременная поддержка нескольких сессий пользователя
- не хранить пароли в базе в открытом виде
- защита от брутфорса (подбора пароля)

Требования к функционалу (платеж):

- защита от ошибочных списаний (изоляция транзакций)
- отсутствие ошибок округления
- корректное хранение и операции с финансовыми данными

Требования к коду:

- конкретный стек (фреймворки и библиотеки) не принципиален
- простая реализация логики и БД

В задании использовался ASP Net Core Minimal API, JWT, SQL Server и Dapper. Стоит упомянуть что в решении настралось ограничение по числу запросов для предотвращения брутфорса пароля, оптимистичную блокировку для обновления баланса и InMemoryCache для хранения невалидных токенов.

`PaymentsDb.sql` скрипт для создания таблиц MS SQL Server, перед запуском скприпта нужно создать пустую базу данных
